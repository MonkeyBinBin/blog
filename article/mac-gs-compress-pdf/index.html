<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF - 被程式設計的猴子</title><meta data-n-head="ssr" http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta data-n-head="ssr" name="author" content="MonkeyBinBin"><meta data-n-head="ssr" property="fb:app_id" content="1816214708495848"><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="被程式設計的猴子 - 記錄日常工作、開發遇到的大小事"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://monkeybinbin.github.io/img/share.jpg"><meta data-n-head="ssr" data-hid="og:image:width" property="og:image:width" content="1080"><meta data-n-head="ssr" data-hid="og:image:height" property="og:image:height" content="1080"><meta data-n-head="ssr" http-equiv="X-UA-Compatible" content="IE=edge"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://monkeybinbin.github.io/article/mac-gs-compress-pdf/"><meta data-n-head="ssr" data-hid="keywords" name="keywords" content="被程式設計的猴子,Nuxt.js,Bootstrap 4,MonkeyBinBin,blog,Automator,Ghostscript,PDF,Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF"><meta data-n-head="ssr" data-hid="description" property="description" content="Mac 作業系統提供一個自動化的應用程式 Automator ，可以將一系列動作組合成一個工作流程。搭配 Ghostscript 來進行 pdf 檔案的壓縮，設定完成後不需要再記住複雜的指令。又可免費壓縮 pdf 檔案。"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="Mac 作業系統提供一個自動化的應用程式 Automator ，可以將一系列動作組合成一個工作流程。搭配 Ghostscript 來進行 pdf 檔案的壓縮，設定完成後不需要再記住複雜的指令。又可免費壓縮 pdf 檔案。"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF - 被程式設計的猴子"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="canonical" rel="canonical" href="https://monkeybinbin.github.io/article/mac-gs-compress-pdf/"><script data-n-head="ssr" src="//www.googletagmanager.com/gtm.js?id=GTM-N24F89P&l=dataLayer" async></script><script data-n-head="ssr" src="//assets.codepen.io/assets/embed/ei.js"></script><base href="/"><link rel="preload" href="/_nuxt/833d02823e9f4f97e566.js" as="script"><link rel="preload" href="/_nuxt/7a95626833f181c796a9.js" as="script"><link rel="preload" href="/_nuxt/896cb395c38d4cce0fa4.css" as="style"><link rel="preload" href="/_nuxt/085a037e8aeb61e0ac80.js" as="script"><link rel="preload" href="/_nuxt/d7e894be7746a4b639c1.css" as="style"><link rel="preload" href="/_nuxt/47e9ca0556d0af89164e.js" as="script"><link rel="preload" href="/_nuxt/ab65f7be0a21035d80a3.css" as="style"><link rel="preload" href="/_nuxt/f668b8b871b5dcaf9911.js" as="script"><link rel="stylesheet" href="/_nuxt/896cb395c38d4cce0fa4.css"><link rel="stylesheet" href="/_nuxt/d7e894be7746a4b639c1.css"><link rel="stylesheet" href="/_nuxt/ab65f7be0a21035d80a3.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="layout-inner top" data-v-371effbb><header class="intro text-center" data-v-d7473412 data-v-371effbb><a href="/" title="HOME" class="intro__avatar nuxt-link-active" data-v-d7473412><img alt="MonkeyBinBin" src="/_nuxt/img/09bf39d.jpg" class="img-thumbnail rounded-circle" data-v-d7473412></a> <div class="intro__text" data-v-d7473412><h1 class="text-white" data-v-d7473412>
      被程式設計的猴子
    </h1></div> <nav class="menu" data-v-e4e5a50c data-v-d7473412><ul class="menu__container" data-v-e4e5a50c><li class="menu__item" data-v-e4e5a50c><a href="/" title="HOME" class="menu__link nuxt-link-active" data-v-e4e5a50c>
        HOME
      </a></li> <li class="menu__item" data-v-e4e5a50c><a href="/archives" title="ARCHIVES" class="menu__link" data-v-e4e5a50c>
        ARCHIVES
      </a></li> <li class="menu__item" data-v-e4e5a50c><a href="/about" title="ABOUT" class="menu__link" data-v-e4e5a50c>
        ABOUT
      </a></li></ul></nav></header> <div class="container" data-v-371effbb><section class="section" data-v-ca6cce78 data-v-371effbb><div data-aos="fade-left" class="container aos-init" data-v-ca6cce78><div class="row" data-v-ca6cce78><div class="col-12" data-v-ca6cce78><div class="article" data-v-3c54882c data-v-ca6cce78><div class="tags" data-v-3c54882c><span class="small text-secondary article__date" data-v-3c54882c><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-calendar-alt fa-w-14" data-v-3c54882c data-v-3c54882c><path fill="currentColor" d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z" data-v-3c54882c data-v-3c54882c></path></svg>
      September 25, 2018
    </span> <a href="/tag/Automator" title="Automator" class="small tag-link" data-v-3c54882c><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-tag fa-w-16" data-v-3c54882c><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z" data-v-3c54882c></path></svg>
      Automator
    </a><a href="/tag/Ghostscript" title="Ghostscript" class="small tag-link" data-v-3c54882c><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-tag fa-w-16" data-v-3c54882c><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z" data-v-3c54882c></path></svg>
      Ghostscript
    </a><a href="/tag/PDF" title="PDF" class="small tag-link" data-v-3c54882c><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-tag fa-w-16" data-v-3c54882c><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z" data-v-3c54882c></path></svg>
      PDF
    </a></div> <h1 data-v-3c54882c><a href="/article/mac-gs-compress-pdf" title="Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF" class="nuxt-link-exact-active nuxt-link-active" data-v-3c54882c>
      Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF
    </a></h1> <hr class="article__divider my-4 mx-0" data-v-3c54882c> <p class="article__slug text-black-50 ml-4" data-v-3c54882c>
    Mac 作業系統提供一個自動化的應用程式 Automator ，可以將一系列動作組合成一個工作流程。搭配 Ghostscript 來進行 pdf 檔案的壓縮，設定完成後不需要再記住複雜的指令。又可免費壓縮 pdf 檔案。
  </p> <!----></div> <div class="md-content" data-v-ca6cce78><h3 id="什麼是ghostscript？">什麼是Ghostscript？</h3>
<p>是一套建基於Adobe、PostScript及可移植文件格式（PDF）的頁面描述語言等而編譯成的自由軟體。</p>
<h3 id="如何安裝ghostscript？">如何安裝Ghostscript？</h3>
<ol>
<li>開啟"終端機"</li>
<li>安裝(更新)Homebrew<pre><code class="language-sh"><pre><code class="hljs sh">ruby -e <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span> &lt; /dev/null 2> /dev/null</code></pre></code></pre>
</li>
<li>安裝Ghostscript<pre><code class="language-sh"><pre><code class="hljs sh">brew install ghostscript</code></pre></code></pre>
</li>
</ol>
<h3 id="如何使用ghostscript壓縮pdf檔案？">如何使用Ghostscript壓縮PDF檔案？</h3>
<p>安裝完Ghostscript之後，可利用指令gs來進行PDF檔案壓縮<br><a target="_blank" href="https://www.ghostscript.com/doc/current/Use.htm#Help_command" title="null">Ghostscript command line 參考資料</a><br>壓縮PDF檔案的指令(參考)</p>
<pre><code class="language-sh"><pre><code class="hljs sh">gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/screen -dCompatibilityLevel=1.4 -sOutputFile=output.pdf input.pdf</code></pre></code></pre>
<p>執行指令時需注意<strong>檔案路徑</strong>的設定, 另外輸入、輸出的檔案不要使用<strong>中文</strong>檔名</p>
<h3 id="什麼是automator？">什麼是Automator？</h3>
<p>是蘋果公司為他們的Mac OS X系統開發的一款軟體。只要通過點擊拖拽滑鼠等操作就可以將一系列動作組合成一個工作流程，從而幫助你自動的（可重複的）完成一些複雜的工作。Automator還能橫跨很多不同種類的程序，包括：Finder、Safari、iCal或者其他的一些程序。它還能和一些第三方的程序一起工作。</p>
<h3 id="如何利用automator來執行ghostscript壓縮pdf檔案？">如何利用Automator來執行Ghostscript壓縮PDF檔案？</h3>
<ol>
<li><p>系統要安裝Ghostscript</p>
</li>
<li><p>開啟Automator.app, 建立新的"服務"<br><img src="///images.ctfassets.net/64scck6nxm6l/4UMEfwKQhAOtOkOQGngFA6/cb0e48e620dfc08683e27d3d0a6d3bfd/_01.png" alt="automator start"></p>
</li>
<li><p>參考下圖設定，並且新增"過瀘Finder項目"設定只允許pdf檔案進行轉換<br><img src="///images.ctfassets.net/64scck6nxm6l/4KCR6O5HigOjAauyrfZV3O/24e3ef4278bfba4607965b84d104d194/_02.png" alt="automator finder setting"></p>
</li>
<li><p>新增"執行 Shell 工序指令"，將下方的shell script貼到指令區塊，並且將"傳遞輸入"改為"作為引數使用"  </p>
<pre><code class="language-sh"><pre><code class="hljs sh"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
<span class="hljs-keyword">do</span>
 INPUTFILE=<span class="hljs-string">"<span class="hljs-variable">$f</span>"</span>
 INPUTDIRNAME=$(dirname <span class="hljs-string">"<span class="hljs-variable">$INPUTFILE</span>"</span>)
 FINALFILENAME=<span class="hljs-string">"<span class="hljs-variable">${<span class="hljs-variable">${INPUTFILE##*/}</span>%.*}</span>"</span>
 RENAMEINPUTFILENAME=<span class="hljs-string">"<span class="hljs-variable">$INPUTDIRNAME</span>"</span>/<span class="hljs-string">"<span class="hljs-subst">$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)</span>"</span>.pdf
 OUTPUTFILENAME=<span class="hljs-string">"<span class="hljs-subst">$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)</span>"</span>.pdf
 OUTPUTFILE=<span class="hljs-string">"<span class="hljs-variable">$INPUTDIRNAME</span>"</span>/<span class="hljs-string">"<span class="hljs-variable">$OUTPUTFILENAME</span>"</span>
 FINALOUTFILE=<span class="hljs-string">"<span class="hljs-variable">$INPUTDIRNAME</span>"</span>/<span class="hljs-string">"<span class="hljs-variable">$FINALFILENAME</span>"</span>_compressed.pdf

 cp <span class="hljs-string">"<span class="hljs-variable">$INPUTFILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$RENAMEINPUTFILENAME</span>"</span>
 /usr/<span class="hljs-built_in">local</span>/bin/gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/screen -dCompatibilityLevel=1.4 -sOutputFile=<span class="hljs-string">"<span class="hljs-variable">$OUTPUTFILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$RENAMEINPUTFILENAME</span>"</span>
 rm -f <span class="hljs-string">"<span class="hljs-variable">$FINALOUTFILE</span>"</span>
 mv <span class="hljs-string">"<span class="hljs-variable">$OUTPUTFILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$FINALOUTFILE</span>"</span>
 rm -f <span class="hljs-string">"<span class="hljs-variable">$RENAMEINPUTFILENAME</span>"</span>
 osascript -e <span class="hljs-string">'tell app "System Events" to display dialog "PDF已產生!['</span><span class="hljs-variable">$FINALOUTFILE</span><span class="hljs-string">']" default button 1 buttons {"OK"}'</span>
<span class="hljs-keyword">done</span></code></pre></code></pre>
<p>設定完成畫面<br><img src="///images.ctfassets.net/64scck6nxm6l/6EE6UDt6u5SInLKBMbIVMU/097505a61233bf93c356c167340c9a19/_03.png" alt="automator shell script"></p>
</li>
<li><p>設定完成後存檔即可使用，儲存的檔名即為在"服務"看到的名稱。在pdf檔案上按右鍵開啟功能選單，並且開啟"服務"即可看到該功能。按下後就會開始執行產生壓縮後的pdf檔案，依據上方提供的script產出的pdf檔案會是原檔名+"_compressed"。(執行時間會因為pdf檔案的大小有所不同，請耐心等待)<br><img src="///images.ctfassets.net/64scck6nxm6l/5O6MnAHzTnMut0yKmEXzbV/09a6067b9ca774954c4971c2fd3150b2/_04.png" alt="automator exec"></p>
</li>
</ol>
<h3 id="如何自訂服務的快速鍵？">如何自訂服務的快速鍵？</h3>
<ol>
<li>開啟"系統偏好設定"進入"鍵盤"的設定，切換至"快速鍵"再選擇左側選單的"服務"。
<img src="///images.ctfassets.net/64scck6nxm6l/6837b9GV3VHddLgOyHArL7/8f1900d4c34f62adfe648c5cf59a10c3/_05.png" alt="automator service hotkey"></li>
<li>找到前面服務存檔的名案名稱，選取該項目畫面就會出現"加入快速鍵"，按下即可設定快速鍵，設定完畢關閉視窗即可使用該快速鍵啟動服務。</li>
</ol>
<h3 id="demo">Demo</h3>
<p>原本10.3MB的檔案壓縮後只剩下1.2MB
<img src="///images.ctfassets.net/64scck6nxm6l/YCPETtRoa4rYh73AS0aWW/1ff9d6f6080f47d0d54c047db67ad452/_06.gif" alt="demo"></p>
<p>~ End ~</p>
</div></div></div> <div class="row" data-v-ca6cce78><div class="col-6" data-v-ca6cce78><a href="/article/set-sass-dev-environment" title="建立 Sass 開發與轉譯產出 CSS 環境配置" class="other-article-link" data-v-ca6cce78><div class="d-flex justify-content-start align-items-center" data-v-ca6cce78><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-alt-circle-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa-2x mr-1 svg-inline--fa fa-arrow-alt-circle-left fa-w-16" data-v-ca6cce78><path fill="currentColor" d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm116-292H256v-70.9c0-10.7-13-16.1-20.5-8.5L121.2 247.5c-4.7 4.7-4.7 12.2 0 16.9l114.3 114.9c7.6 7.6 20.5 2.2 20.5-8.5V300h116c6.6 0 12-5.4 12-12v-64c0-6.6-5.4-12-12-12z" data-v-ca6cce78></path></svg> <span data-v-ca6cce78>建立 Sass 開發與轉譯產出 CSS 環境配置</span></div></a></div> <div class="col-6" data-v-ca6cce78><a href="/article/mac-reform-itermapp" title="Mac 端終機大改造， iTerm2 + Oh my zsh 好看也好用" class="other-article-link" data-v-ca6cce78><div class="d-flex justify-content-end align-items-center" data-v-ca6cce78><span class="text-right" data-v-ca6cce78>
              Mac 端終機大改造， iTerm2 + Oh my zsh 好看也好用
            </span> <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-alt-circle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa-2x ml-1 svg-inline--fa fa-arrow-alt-circle-right fa-w-16" data-v-ca6cce78><path fill="currentColor" d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zM140 300h116v70.9c0 10.7 13 16.1 20.5 8.5l114.3-114.9c4.7-4.7 4.7-12.2 0-16.9l-114.3-115c-7.6-7.6-20.5-2.2-20.5 8.5V212H140c-6.6 0-12 5.4-12 12v64c0 6.6 5.4 12 12 12z" data-v-ca6cce78></path></svg></div></a></div> <div class="col-12" data-v-ca6cce78><hr data-v-ca6cce78> <div class="comments" data-v-ca6cce78><div id="disqus_thread" url="https://monkeybinbin.github.io/article/mac-gs-compress-pdf" style="min-height:200px" data-v-ca6cce78></div></div></div></div></div></section> <button type="button" class="btn scrolltop-button" data-v-371effbb><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-up fa-w-14" data-v-371effbb data-v-371effbb><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z" data-v-371effbb data-v-371effbb></path></svg></button></div> <footer class="footer" data-v-fde07c60 data-v-371effbb><div class="container" data-v-fde07c60><div class="row align-items-center" data-v-fde07c60><div class="col-12 text-center" data-v-fde07c60>
        © 2018 MonkeyBinBin. <br class="d-block d-sm-none" data-v-fde07c60>Built with Nuxt.js and Bootstrap 4.
      </div></div></div></footer></div></div></div><script>window.__NUXT__=function(t){return{layout:"default",data:[{id:t,post:{title:"Mac OS 利用 Automator 搭配 Ghostscript 壓縮 PDF",id:t,slug:"Mac 作業系統提供一個自動化的應用程式 Automator ，可以將一系列動作組合成一個工作流程。搭配 Ghostscript 來進行 pdf 檔案的壓縮，設定完成後不需要再記住複雜的指令。又可免費壓縮 pdf 檔案。",categoryList:["Automator","Ghostscript","PDF"],createDate:"2018-09-25",articleContent:'### 什麼是Ghostscript？\n是一套建基於Adobe、PostScript及可移植文件格式（PDF）的頁面描述語言等而編譯成的自由軟體。\n\n### 如何安裝Ghostscript？\n1. 開啟"終端機"\n2. 安裝(更新)Homebrew\n``` sh\nruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" < /dev/null 2> /dev/null\n```\n3. 安裝Ghostscript\n``` sh\nbrew install ghostscript\n```\n\n### 如何使用Ghostscript壓縮PDF檔案？\n安裝完Ghostscript之後，可利用指令gs來進行PDF檔案壓縮  \n[Ghostscript command line 參考資料](https://www.ghostscript.com/doc/current/Use.htm#Help_command)  \n壓縮PDF檔案的指令(參考)\n``` sh\ngs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/screen -dCompatibilityLevel=1.4 -sOutputFile=output.pdf input.pdf\n```\n執行指令時需注意**檔案路徑**的設定, 另外輸入、輸出的檔案不要使用**中文**檔名\n\n### 什麼是Automator？\n是蘋果公司為他們的Mac OS X系統開發的一款軟體。只要通過點擊拖拽滑鼠等操作就可以將一系列動作組合成一個工作流程，從而幫助你自動的（可重複的）完成一些複雜的工作。Automator還能橫跨很多不同種類的程序，包括：Finder、Safari、iCal或者其他的一些程序。它還能和一些第三方的程序一起工作。\n\n### 如何利用Automator來執行Ghostscript壓縮PDF檔案？\n1. 系統要安裝Ghostscript\n2. 開啟Automator.app, 建立新的"服務"  \n![automator start](//images.ctfassets.net/64scck6nxm6l/4UMEfwKQhAOtOkOQGngFA6/cb0e48e620dfc08683e27d3d0a6d3bfd/_01.png)\n3. 參考下圖設定，並且新增"過瀘Finder項目"設定只允許pdf檔案進行轉換  \n![automator finder setting](//images.ctfassets.net/64scck6nxm6l/4KCR6O5HigOjAauyrfZV3O/24e3ef4278bfba4607965b84d104d194/_02.png)\n4. 新增"執行 Shell 工序指令"，將下方的shell script貼到指令區塊，並且將"傳遞輸入"改為"作為引數使用"  \n``` sh\nfor f in "$@"\ndo\n\tINPUTFILE="$f"\n\tINPUTDIRNAME=$(dirname "$INPUTFILE")\n\tFINALFILENAME="${${INPUTFILE##*/}%.*}"\n\tRENAMEINPUTFILENAME="$INPUTDIRNAME"/"$(cat /dev/urandom | tr -dc \'a-zA-Z0-9\' | fold -w 32 | head -n 1)".pdf\n\tOUTPUTFILENAME="$(cat /dev/urandom | tr -dc \'a-zA-Z0-9\' | fold -w 32 | head -n 1)".pdf\n\tOUTPUTFILE="$INPUTDIRNAME"/"$OUTPUTFILENAME"\n\tFINALOUTFILE="$INPUTDIRNAME"/"$FINALFILENAME"_compressed.pdf\n\n\tcp "$INPUTFILE" "$RENAMEINPUTFILENAME"\n\t/usr/local/bin/gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/screen -dCompatibilityLevel=1.4 -sOutputFile="$OUTPUTFILE" "$RENAMEINPUTFILENAME"\n\trm -f "$FINALOUTFILE"\n\tmv "$OUTPUTFILE" "$FINALOUTFILE"\n\trm -f "$RENAMEINPUTFILENAME"\n\tosascript -e \'tell app "System Events" to display dialog "PDF已產生![\'$FINALOUTFILE\']" default button 1 buttons {"OK"}\'\ndone\n```\n設定完成畫面  \n![automator shell script](//images.ctfassets.net/64scck6nxm6l/6EE6UDt6u5SInLKBMbIVMU/097505a61233bf93c356c167340c9a19/_03.png)\n5. 設定完成後存檔即可使用，儲存的檔名即為在"服務"看到的名稱。在pdf檔案上按右鍵開啟功能選單，並且開啟"服務"即可看到該功能。按下後就會開始執行產生壓縮後的pdf檔案，依據上方提供的script產出的pdf檔案會是原檔名+"\\_compressed"。(執行時間會因為pdf檔案的大小有所不同，請耐心等待)  \n![automator exec](//images.ctfassets.net/64scck6nxm6l/5O6MnAHzTnMut0yKmEXzbV/09a6067b9ca774954c4971c2fd3150b2/_04.png)\n\n### 如何自訂服務的快速鍵？\n1. 開啟"系統偏好設定"進入"鍵盤"的設定，切換至"快速鍵"再選擇左側選單的"服務"。\n![automator service hotkey](//images.ctfassets.net/64scck6nxm6l/6837b9GV3VHddLgOyHArL7/8f1900d4c34f62adfe648c5cf59a10c3/_05.png)\n2. 找到前面服務存檔的名案名稱，選取該項目畫面就會出現"加入快速鍵"，按下即可設定快速鍵，設定完畢關閉視窗即可使用該快速鍵啟動服務。\n\n### Demo\n原本10.3MB的檔案壓縮後只剩下1.2MB\n![demo](//images.ctfassets.net/64scck6nxm6l/YCPETtRoa4rYh73AS0aWW/1ff9d6f6080f47d0d54c047db67ad452/_06.gif)\n\n\\~ End \\~\n'},prevPost:{id:"set-sass-dev-environment",createDate:"2018-09-08",title:"建立 Sass 開發與轉譯產出 CSS 環境配置"},nextPost:{id:"mac-reform-itermapp",createDate:"2018-11-26",title:"Mac 端終機大改造， iTerm2 + Oh my zsh 好看也好用"}}],fetch:[],error:null,serverRendered:!0,routePath:"/article/mac-gs-compress-pdf"}}("mac-gs-compress-pdf")</script><script src="/_nuxt/833d02823e9f4f97e566.js" defer></script><script src="/_nuxt/f668b8b871b5dcaf9911.js" defer></script><script src="/_nuxt/7a95626833f181c796a9.js" defer></script><script src="/_nuxt/085a037e8aeb61e0ac80.js" defer></script><script src="/_nuxt/47e9ca0556d0af89164e.js" defer></script>
  </body>
</html>
